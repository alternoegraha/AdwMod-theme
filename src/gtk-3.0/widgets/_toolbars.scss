/************
 * Toolbars *
 ************/
%toolbar {
  -GtkWidget-window-dragging: true;
  padding: 4px;
  background-color: $bg_color;
}

toolbar {
  @extend %toolbar;

  padding: 4px 3px 3px 4px;

  // on OSD
  .osd & { background-color: transparent; }

  // stand-alone OSD toolbars
  &.osd {
    padding: 13px;
    border: none;
    border-radius: 5px;
    background-color: $osd_bg_color;

    &.left,
    &.right,
    &.top,
    &.bottom { border-radius: 0; } // positional classes for `attached` osd toolbars
  }

  // toolbar separators
  &.horizontal separator { margin: 0 7px 1px 6px; }
  &.vertical separator { margin: 6px 1px 7px 0; }

  &:not(.inline-toolbar):not(.osd) {
    // workaround: add margins to the children of tool items to simulate
    // spacing, ignore the overflow button (.toggle) and the overflow menu
    // (.popup)
    > *:not(.toggle):not(.popup) > * {
      margin-right: 1px;
      margin-bottom: 1px;
    }
  }
}

//searchbar, location-bar & inline-toolbar
.inline-toolbar {
  @extend %toolbar;

  @extend %darkbar;

  padding: 3px;
  border-width: 0 1px 1px;
  border-radius: 0  0 5px 5px;
}

searchbar > revealer > box,
.location-bar {
  @extend %toolbar;

  @extend %darkbar;

  border-width: 0 0 1px;
  padding: 3px;
}

searchbar > revealer > box {
  // workaround: undo the GtkContainer:border-width and use CSS padding instead
  margin: -6px;
  padding: 6px;
}

%darkbar {
  border-style: solid;
  border-color: $borders_color;
  $_bg: mix($bg_color, $borders_color, 70%);
  background-color: $_bg;

  &:backdrop {
    border-color: $backdrop_borders_color;
    background-color: $backdrop_dark_fill;
    box-shadow: none;
    transition: $backdrop_transition;
  }
}

/**************
 * GtkInfoBar *
 **************/
infobar {
  border-style: none;

  &.action:hover > revealer > box {
      background-color: if($variant == 'light', desaturate(lighten(invert($selected_bg_color), 47%), 30%), 
                        desaturate(darken(invert($selected_bg_color),42%), 70%));
      border-bottom: 1px solid lighten($borders_color, 5%);
  }

  &.info,
  &.question,
  &.warning,
  &.error {
    &:backdrop > revealer > box, & > revealer > box {
      label, & { color: $fg_color; }
      background-color: if($variant == 'light', desaturate(lighten(invert($selected_bg_color), 45%), 30%), 
                        desaturate(darken(invert($selected_bg_color),40%), 70%));
      border-bottom: 1px solid lighten($borders_color, 5%);
    }

    text-shadow: none;

    &:backdrop { text-shadow: none; }

    button {
      // FIXME: extend selection mode buttons
      @include button(normal, $bg_color, $fg_color, none);

      &:hover { @include button(hover, $bg_color, $fg_color, none); }

      &:active,
      &:checked { @include button(active, $bg_color, $fg_color, none); }

      &:disabled { @include button(insensitive,$bg_color,$fg_color,none); }

      &:backdrop {
        @include button(backdrop, $bg_color, $fg_color, none);
        border-color: _border_color($bg_color);

        &:disabled {
          @include button(backdrop-insensitive, $bg_color,
                          $fg_color, none);
          border-color: _border_color($bg_color);
        }
      }
      &:backdrop, & {
        label, & { color: $fg_color; }
      }
    }

    selection { background-color: darken($bg_color, 10%); }

    *:link { color: $link_color; }
  }
}
